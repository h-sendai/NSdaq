# FPGAからくるデータフォーマット

```
1bit <---15 bit ---> <--- 15 bit --->
 0    1             15              31
+-----+--------------+---------------+
|flag |    Count     |    Data       | (1サンプル目)
+-----+--------------+---------------+
|flag |    Count     |    Data       | (2サンプル目)
+-----+--------------+---------------+
|flag |    Count     |    Data       | (3サンプル目)
+-----+--------------+---------------+
|flag |    Count     |    Data       | (4サンプル目)
+-----+--------------+---------------+
```

- なんらかの原因でFPGA側でデータ送り漏れがあった場合は次に送るデータの
flagが1になっている。
- Count (15 bit)は1サンプルごとに +1 された値が入っている。最大値(2^31-1)の
次は0になる。
- Data (16 bit)は上位4ビットは0、下位12ビットに正味のデータが入っている。

## データレート

上記のフォーマット(1イベント32ビット)を10MHzで送ってくるので
データレートは
10MHz * 32 bit = 320 Mbps = 38.14 MiB/s
になる。

## flagの例

```
flag Count Data
0    0     0x000000AA
0    1     0x000000AB
1    2     0x000000AC
0    3     0x000000AD
```

とデータがきた場合、
```
0    1     0x000000AB
```
と
```
1    2     0x000000AC
```
の間にはなにか別のデータがあったことを示している。
